---
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import BaseLayout from '../../layouts/BaseLayout.astro';

const lessonsDir = './src/content/lessons';
const files = fs.readdirSync(lessonsDir);

const lessons = files.map((filename) => {
  const filePath = path.join(lessonsDir, filename);
  const fileContent = fs.readFileSync(filePath, 'utf-8');
  const { data } = matter(fileContent);
  const slug = filename.replace('.md', '');
  return { slug, ...data };
});
---

<BaseLayout>
  <h1 class="text-2xl font-bold mb-4">ðŸ“š Lessons</h1>
  <ul class="space-y-4">
    {lessons.map((lesson) => (
      <li class="border p-4 rounded-lg shadow-sm">
        <a href={`/lessons/${lesson.slug}`} class="text-xl text-blue-600 hover:underline">
          {lesson.title}
        </a>
        <p class="text-sm text-gray-600 mt-1">{lesson.description}</p>
      </li>
    ))}
  </ul>
</BaseLayout>
